<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lendtech Simulator: Loan Application</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Calibri', 'sans-serif'],
                    },
                    colors: {
                        'primary-blue': '#1a73e8',
                        'secondary-gray': '#f1f3f4',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Calibri', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        .container-card {
            background-color: white;
            padding: 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 28rem;
            width: 100%;
            border: 1px solid #e0e4e8;
        }
        input, select {
            border: 1px solid #d1d5db;
            padding: 0.75rem;
            border-radius: 0.5rem;
            width: 100%;
            transition: all 0.2s;
        }
        input:focus, select:focus {
            border-color: #1a73e8;
            outline: none;
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }
        .message-box {
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            font-weight: 600;
        }
        .bg-success { background-color: #d4edda; color: #155724; }
        .bg-danger { background-color: #f8d7da; color: #721c24; }
        .bg-warning { background-color: #fff3cd; color: #856404; }
        .btn {
            background-color: #1a73e8;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn:hover {
            background-color: #1669c1;
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.2s;
        }
        .tab-button.active {
            background-color: #1a73e8;
            color: white;
        }
        .tab-button:not(.active):hover {
            background-color: #e2e8f0;
        }
    </style>
</head>
<body>

<div class="container-card">
    
    <div class="flex justify-center items-center space-x-2 mb-8">
        <button id="show-app" class="tab-button active">Loan Application</button>
        <button id="show-about" class="tab-button">About Lendtech</button>
    </div>

    <div id="application-page">
        <h1 class="text-3xl font-bold text-center mb-6">Loan Application</h1>
        <p class="text-center text-gray-500 mb-8">Fill in your details to get an instant decision on your loan application.</p>
        
        <form id="loanForm" class="space-y-6">
            <div>
                <label for="loanAmount" class="block text-sm font-medium text-gray-700 mb-1">Loan Amount (£)</label>
                <input type="number" id="loanAmount" placeholder="e.g., 5000" class="shadow-sm">
            </div>
            
            <div>
                <label for="loanTerm" class="block text-sm font-medium text-gray-700 mb-1">Loan Term (Years)</label>
                <select id="loanTerm" class="shadow-sm">
                    <option value="1">1 year</option>
                    <option value="2">2 years</option>
                    <option value="3">3 years</option>
                    <option value="4">4 years</option>
                    <option value="5">5 years</option>
                </select>
            </div>
            
            <div>
                <label for="annualIncome" class="block text-sm font-medium text-gray-700 mb-1">Annual Income (£)</label>
                <input type="number" id="annualIncome" placeholder="e.g., 30000" class="shadow-sm">
            </div>

            <div>
                <label for="jobTitle" class="block text-sm font-medium text-gray-700 mb-1">Job Title</label>
                <input type="text" id="jobTitle" placeholder="e.g., Engineer, Freelancer" class="shadow-sm">
            </div>

            <div>
                <label for="creditScore" class="block text-sm font-medium text-gray-700 mb-1">Credit Score (300-850)</label>
                <input type="number" id="creditScore" placeholder="e.g., 750" class="shadow-sm">
            </div>

            <div>
                <label for="savings" class="block text-sm font-medium text-gray-700 mb-1">Current Savings (£)</label>
                <input type="number" id="savings" placeholder="e.g., 1000" class="shadow-sm">
            </div>
            
            <div class="pt-4">
                <button type="submit" class="btn w-full">Submit</button>
            </div>
        </form>
        
        <div id="result" class="mt-8 hidden">
            <h2 class="text-xl font-semibold mb-4 text-center">Application Decision</h2>
            <div id="resultBox" class="message-box"></div>
        </div>
        
        <div id="calculation-result" class="mt-8 hidden">
            <h2 class="text-xl font-semibold mb-4 text-center">Your Estimated Repayment</h2>
            <div class="message-box bg-secondary-gray text-center">
                <p>Your estimated monthly repayment would be: <strong id="monthly-payment" class="text-primary-blue text-lg"></strong></p>
                <p class="text-xs text-gray-500 mt-1">
                    *Based on a fixed 7% annual interest rate.
                </p>
            </div>
        </div>
    </div>

    
    <div id="about-page" class="hidden">
        <h1 class="text-3xl font-bold text-center mb-6">What is Lendtech?</h1>
        <p class="text-gray-600 mb-6 leading-relaxed">
            Lendtech is a blend of "lending" and "technology." It refers to the use of modern technology, such as mobile apps and data analysis, to streamline and improve the loan application process. This means faster decisions can be made, with a simpler user experience compared to going into a traditional bank.
        </p>

        <h2 class="text-xl font-bold mb-4">Who is Eligible?</h2>
        <p class="text-gray-600 mb-4 leading-relaxed">
            In this simulator, loan decisions are based on a few key factors reflecting common lending criteria. In the real world, a lendtech firm would analyse many more variables, but these give you an idea of the core principles:
        </p>
        
        <ul class="list-disc list-inside space-y-2 text-gray-700">
            <li>
                <strong class="font-semibold">Income:</strong> Lenders want to ensure you have the financial capacity to repay the loan without difficulty.
            </li>
            <li>
                <strong class="font-semibold">Loan-to-Income Ratio:</strong> This is a measure of how much you are borrowing compared to how much you earn. A loan that is a high percentage of your income (e.g. >50%) is considered high risk.
            </li>
            <li>
                <strong class="font-semibold">Loan Term:</strong> The duration of the loan. While longer terms can lower monthly payments, they can also increase the overall interest paid.
            </li>
        </ul>
        <p class="text-gray-600 mt-6 leading-relaxed">
            This simulator uses a simple set of rules to give you an immediate decision. Real-world lendtech platforms use sophisticated algorithms that analyze credit history, spending habits, and other data to make a more complete assessment.
        </p>

        <h2 class="text-xl font-bold mb-4 mt-8">How Loan Repayment is Calculated</h2>
        <p class="text-gray-600 mb-4 leading-relaxed">
            Loan repayment is based on a standard formula. This formula calculates the fixed monthly payment needed to pay off both the loan and the amount of interest over the loan term.
        </p>
        
        <p class="text-gray-600 mt-6 leading-relaxed">
            This formula ensures that a portion of each monthly payment goes towards paying down the principal and a portion goes towards the interest on the remaining balance.
        </p>

        <h2 class="text-xl font-bold mb-4 mt-8">UK Loan Application Statistics</h2>
        <div class="flex justify-center">
            <div class="w-full max-w-sm">
                <canvas id="loanChart"></canvas>
            </div>
        </div>
        <p class="text-center text-gray-500 text-sm mt-4">
            Source: Based on general UK lending data. Individual lender approval rates will vary.
        </p>

        <h2 class="text-xl font-bold mb-4 mt-8">Additional Factors for Approval</h2>
        <p class="text-gray-600 mb-4 leading-relaxed">
            Lenders don't just look at income and loan amount. They view your total financial health. This simulator now includes the following factors to provide a more realistic decision:
        </p>

        <ul class="list-disc list-inside space-y-2 text-gray-700">
            <li>
                <strong class="font-semibold">Credit Score:</strong> This is a key indicator of your past financial behavior. A high score suggests a history of responsible borrowing and repayment.
            </li>
            <li>
                <strong class="font-semibold">Employment Status:</strong> Having a stable job is a strong sign of a reliable income stream. Some professions are seen as more stable than others.
            </li>
            <li>
                <strong class="font-semibold">Current Savings:</strong> Your savings act as a buffer and show that you have the means to handle unexpected expenses, making you a lower-risk borrower.
            </li>
        </ul>
    </div>
</div>

<script>
    document.getElementById('loanForm').addEventListener('submit', function(e) {
        e.preventDefault();

        const loanAmount = parseFloat(document.getElementById('loanAmount').value);
        const annualIncome = parseFloat(document.getElementById('annualIncome').value);
        const loanTerm = parseInt(document.getElementById('loanTerm').value);
        const jobTitle = document.getElementById('jobTitle').value.toLowerCase();
        const creditScore = parseInt(document.getElementById('creditScore').value);
        const savingsAmount = parseFloat(document.getElementById('savings').value);
        
        const resultDiv = document.getElementById('result');
        const resultBox = document.getElementById('resultBox');
        const calculationDiv = document.getElementById('calculation-result');
        const monthlyPaymentSpan = document.getElementById('monthly-payment');

        resultDiv.classList.add('hidden');
        resultBox.className = 'message-box';
        resultBox.innerHTML = '';
        calculationDiv.classList.add('hidden');
        monthlyPaymentSpan.textContent = '';

        if (isNaN(loanAmount) || isNaN(annualIncome) || isNaN(creditScore) || isNaN(savingsAmount) || loanAmount <= 0 || annualIncome <= 0 || creditScore < 300 || creditScore > 850) {
            resultDiv.classList.remove('hidden');
            resultBox.classList.add('bg-danger');
            resultBox.innerHTML = '<strong>Error:</strong> Please enter valid numbers and a credit score between 300 and 850.';
            return;
        }

        let decision = '';
        let message = '';
        let reasoning = '';
        let score = 0;

        const loanIncomeRatio = loanAmount / annualIncome;
        if (loanIncomeRatio < 0.25) {
            score += 2;
        } else if (loanIncomeRatio < 0.5) {
            score += 1;
        } else {
            score -= 2;
        }

        if (creditScore >= 700) {
            score += 3;
        } else if (creditScore >= 580) {
            score += 1;
        } else {
            score -= 3;
        }

    
        const highRiskJobs = ['unemployed', 'freelancer', 'gig worker'];
        const lowRiskJobs = ['doctor', 'nurse', 'teacher', 'engineer', 'civil servant', 'accountant'];
        let jobRisk = 0;

        if (highRiskJobs.some(job => jobTitle.includes(job))) {
            score -= 1;
            jobRisk = -1;
        } else if (lowRiskJobs.some(job => jobTitle.includes(job))) {
            score += 1;
            jobRisk = 1;
        }

        
        const monthlyPaymentEstimate = (loanAmount / loanTerm) * 1.07; 
        if (savingsAmount > monthlyPaymentEstimate * 3) {
            score += 1;
        }

      
        if (score >= 4) {
            decision = 'approved';
            message = 'Congratulations! Your loan application has been approved.';
            reasoning = `Your application was successful, largely due to your strong credit score and a manageable loan-to-income ratio.`;
        } else if (score >= 0) {
            decision = 'referred';
            message = 'Your application requires further review. A member of our team will contact you shortly.';
            reasoning = 'Your application shows potential, but a combination of factors, such as credit score or employment, requires a manual review.';
        } else {
            decision = 'declined';
            message = 'Your application has been declined based on our lending criteria.';
            reasoning = `Your application was declined due to high-risk factors, including your credit score and potentially your income and employment status.`;
        }

        
        const annualInterestRate = 0.07; 
        const monthlyInterestRate = annualInterestRate / 12;
        const numberOfPayments = loanTerm * 12;
        
        let monthlyPayment;
        if (monthlyInterestRate > 0) {
            monthlyPayment = (loanAmount * monthlyInterestRate) / (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments));
        } else {
            monthlyPayment = loanAmount / numberOfPayments;
        }
        
        
        resultDiv.classList.remove('hidden');
        calculationDiv.classList.remove('hidden');
        monthlyPaymentSpan.textContent = `£${monthlyPayment.toFixed(2)}`;

        if (decision === 'approved') {
            resultBox.classList.add('bg-success');
        } else if (decision === 'declined') {
            resultBox.classList.add('bg-danger');
        } else {
            resultBox.classList.add('bg-warning');
        }
        resultBox.innerHTML = `
            <div><strong>${message}</strong></div>
            <div class="mt-2 text-sm">${reasoning}</div>
        `;
    });

    
    const showAppButton = document.getElementById('show-app');
    const showAboutButton = document.getElementById('show-about');
    const appPage = document.getElementById('application-page');
    const aboutPage = document.getElementById('about-page');

    showAppButton.addEventListener('click', () => {
        appPage.classList.remove('hidden');
        aboutPage.classList.add('hidden');
        showAppButton.classList.add('active');
        showAboutButton.classList.remove('active');
    });

    showAboutButton.addEventListener('click', () => {
        appPage.classList.add('hidden');
        aboutPage.classList.remove('hidden');
        showAboutButton.classList.add('active');
        showAppButton.classList.remove('active');
    });

    
    window.onload = function() {
        const ctx = document.getElementById('loanChart').getContext('2d');
        const loanChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Approved', 'Rejected'],
                datasets: [{
                    data: [70, 30], 
                    backgroundColor: [
                        '#1a73e8', //approved
                        '#d1d5db' //rejected
                    ],
                    hoverOffset: 4,
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#333'
                        }
                    },
                    title: {
                        display: true,
                        text: 'UK Personal Loan Application Outcomes',
                        font: {
                            size: 16,
                            weight: 'bold'
                        },
                        color: '#333'
                    }
                }
            }
        });
    };
</script>

</body>
</html>
